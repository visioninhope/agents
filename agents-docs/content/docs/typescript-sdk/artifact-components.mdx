---
title: Artifact Components
description: Learn how to use artifact components to store and retrieve data from the agent
icon: "TbInputSpark"
---

<Snippet file="multi-agent-framework/artifacts.mdx" />

## Defining Artifact Components

Artifact components are defined when creating an agent using the `artifactComponents` property. You can use either JSON Schema or Zod schemas:

### Using Zod Schemas (Recommended)

```typescript
import { z } from 'zod';
import { preview } from '@inkeep/agents-core';

const agent = agent({
  // ... other agent config
  artifactComponents: [
    {
      id: "citation",
      name: "Citation",
      description: "Structured factual information extracted from search results",
      props: z.object({
        title: preview(z.string().describe("Title of the source document")),
        url: preview(z.string().describe("URL of the source document")),
        record_type: preview(
          z.string().describe("Type of record (documentation, blog, guide, etc.)")
        ),
        content: z
          .array(
            z.object({
              type: z.string().describe("Type of content (text, image, video, etc.)"),
              text: z.string().describe("The actual text content"),
            })
          )
          .describe("Array of structured content blocks extracted from the document"),
      }),
    },
  ],
});
```

### Using JSON Schema

```typescript
const agent = agent({
  // ... other agent config
  artifactComponents: [
    {
      id: "citation",
      name: "Citation",
      description: "Structured factual information extracted from search results",
      props: {
        type: "object",
        properties: {
          title: {
            type: "string",
            description: "Title of the source document",
            inPreview: true,
          },
          url: { 
            type: "string", 
            description: "URL of the source document",
            inPreview: true,
          },
          record_type: {
            type: "string",
            description: "Type of record (documentation, blog, guide, etc.)",
            inPreview: true,
          },
          content: {
            type: "array",
            items: {
              type: "object",
              properties: {
                type: {
                  type: "string",
                  description: "Type of content (text, image, video, etc.)",
                },
                text: {
                  type: "string",
                  description: "The actual text content",
                },
              },
              required: ["type", "text"],
            },
            description: "Array of structured content blocks extracted from the document",
          },
        },
        required: ["title", "url", "record_type", "content"],
      },
    },
  ],
});
```

## Schema Options

Artifact components can be configured in three ways:

1. **Zod Schema** (Recommended): Type-safe schema definition with automatic JSON Schema conversion
2. **JSON Schema**: Traditional JSON Schema with manual `inPreview` flags
3. **No Schema**: Save the entire tool result as-is (no field filtering)

### Zod Schema Benefits

- **Type Safety**: Compile-time validation of your schema
- **Better DX**: IntelliSense support and `.describe()` for documentation
- **Automatic Conversion**: Converts to JSON Schema automatically
- **Preview Support**: Use `preview()` helper for `inPreview` fields

### Preview Fields

When using a schema:
- **Preview fields** (`inPreview: true` or `preview()`): Shown to agents automatically and streamed in real-time  
- **Full fields**: Complete data available when agents request the full artifact

When no schema is provided, the entire tool result is saved and available to agents.

## Artifact Creation

When an agent uses a tool:

1. The tool processes the request and returns a response
2. **The agent decides** whether to create an artifact from the tool response
3. If created, the artifact is parsed according to the artifact component schema
4. The artifact can be associated with any data components that reference this information

## Artifacts vs Data Components

**Artifacts** and **Data Components** are different:

- **Artifacts**: Citations/sources from tool results stored in the database
- **Data Components**: UI elements agents output in responses (Text, Fact, etc.)

Artifacts provide the source citations that back up information in data components.

## Example Flow

```typescript
import { z } from 'zod';
import { preview } from '@inkeep/agents-core';

const searchAgent = agent({
  id: "search",
  canUse: () => [searchTool],
  prompt: "Search for information and cite sources using artifacts.",
  artifactComponents: [
    {
      id: "document",
      name: "Document",
      description: "Search result document",
      props: z.object({
        title: preview(z.string().describe("Document title")),
        url: preview(z.string().describe("Document URL")),
        content: z.string().describe("Document content"),
      }),
    },
  ],
});
```

## No Schema Example

```typescript
const rawDataAgent = agent({
  id: "raw-data",
  canUse: () => [apiTool],
  prompt: "Fetch data and save complete responses.",
  artifactComponents: [
    {
      id: "api-response",
      name: "API Response",
      description: "Complete API response data",
      // No props - saves entire tool result
    },
  ],
});
```

Example flow:

1. Agent uses search tool and gets results
2. **Agent decides** to create an artifact citing the source document
3. Artifact is stored with preview fields (title, url) shown to other agents
4. Other agents can reference this artifact or get full content when needed
